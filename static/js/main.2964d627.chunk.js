(this["webpackJsonpmeeting-planning-calendar-react"]=this["webpackJsonpmeeting-planning-calendar-react"]||[]).push([[0],{16:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var a=n(6),c=n(0),r=n(30),s=Object(a.a)(r.a,1)[0],i=Object(c.createContext)({defaultSessionUser:s}),o=i.Provider;i.Consumer},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=[{id:"0000",data:{name:"guest",rights:"user"}}]},40:function(e,t,n){"use strict";(function(e){var a=n(6),c=n(0),r=n(16),s=n(1);t.a=function(t){var n=t.event,i=t.onEventDelete,o=Object(c.useContext)(r.b).sessionUser,l=function(){e.confirm("Are you sure you want to delete '".concat(n.data.name,"' event?"))&&i(n.id)},u=function(){return o&&"admin"===o.data.rights?Object(s.jsxs)("div",{draggable:"true","data-meeting":n.id,"data-meeting-day":n.data.day,"data-meeting-time":n.data.time,children:[Object(s.jsx)("div",{className:"calendar__table-column_meeting",children:n.data.name}),Object(s.jsx)("button",{type:"button",className:"calendar__table-column_meeting_delete","data-delete":"delete",onClick:l,children:"\xd7"})]}):Object(s.jsx)("div",{draggable:"true","data-meeting":n.id,"data-meeting-day":n.data.day,"data-meeting-time":n.data.time,children:Object(s.jsx)("div",{className:"calendar__table-column_meeting",children:n.data.name})})},d=Object(c.useState)(u()),j=Object(a.a)(d,2),b=j[0],m=j[1];return Object(c.useEffect)((function(){m(u())}),[o]),b}}).call(this,n(39))},48:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(22),s=n.n(r),i=n(19),o=(n(48),n(49),n(14)),l=n.n(o),u=n(23),d=n(6),j=n(7),b=n(16),m=n(30),O=n(10),f=n(67),h=n(1);var v=function(e){var t=e.users,n=e.setSortingBy,c=Object(a.useContext)(b.b).sessionUser,r=function(){return c&&"admin"===c.data.rights?Object(h.jsx)(i.b,{to:"/meeting-planning-calendar-react/create-event",children:Object(h.jsx)("button",{type:"submit",name:"newEvent",className:"btn btn-outline-dark",children:"New event +"})}):Object(h.jsx)("button",{type:"submit",name:"newEvent",className:"btn btn-outline-dark disabled",children:"New event +"})},s=Object(a.useState)(r()),o=Object(d.a)(s,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){u(r())}),[c]),Object(h.jsxs)("div",{className:"calendar__header",children:[Object(h.jsx)("div",{children:Object(h.jsx)("h1",{children:"Calendar"})}),Object(h.jsxs)("div",{className:"calendar__header_handling",children:[Object(h.jsx)("div",{className:"calendar__header_handling-dropdown",children:Object(h.jsxs)("select",{className:"form-select form-select-lg",id:"membersDropdown",onChange:function(e){var t=e.target[e.target.selectedIndex].getAttribute("data-userid");n(t)},children:[Object(h.jsx)("option",{value:"All members","data-userid":"All members",children:"All members"}),t.map((function(e){return Object(h.jsxs)("option",{value:e.data.name,"data-userid":e.id,"data-rights":e.data.rights,children:[e.data.name," (",e.data.rights,")"]},e.id)}))]})}),Object(h.jsx)("div",{className:"calendar__header_handling-newEventCreatingButton",children:l})]})]})},x=n(40),p=["Mon","Tue","Wed","Thu","Fri"],g=10;var _=function(e){var t=e.day,n=e.events,a=e.onEventDelete,c=e.sortingBy;if(n){var r=Object(O.a)(n).filter((function(e){return e.data.day===t}));return"All members"===c&&(r=Object(O.a)(n).filter((function(e){return e.data.day===t}))),"All members"!==c&&(r=r.filter((function(e){return e.data.members.some((function(e){return e.id===c}))}))),Object(h.jsx)(h.Fragment,{children:Object(O.a)(Array(9)).map((function(e,n){var c="".concat(n+g,":00");return r.some((function(e){return e.data.time===c}))?Object(h.jsx)("li",{"data-time":c,"data-day":t,children:Object(h.jsx)(x.a,{event:r.find((function(e){return e.data.time===c})),onEventDelete:a})},"".concat(t," ").concat(c)):Object(h.jsx)("li",{"data-time":c,"data-day":t},"".concat(t," ").concat(c))}))})}return Object(h.jsx)(h.Fragment,{children:Object(O.a)(Array(9)).map((function(e,n){var a="".concat(n+g,":00");return Object(h.jsx)("li",{"data-time":"".concat(a),"data-day":t},"".concat(t," ").concat(a))}))})};var y=function(){return Object(h.jsx)(h.Fragment,{children:Object(O.a)(Array(9)).map((function(e,t){var n="".concat(t+g,":00");return Object(h.jsx)("li",{children:n},n)}))})};var N=function(e){var t=e.events,n=e.onEventDelete,a=e.sortingBy;return Object(h.jsxs)("div",{className:"calendar__table",children:[Object(h.jsxs)("ul",{className:"calendar__table-column","data-day":"Name",children:[Object(h.jsx)("li",{className:"calendar__table-column-header",children:"Name"}),Object(h.jsx)(y,{})]}),p.map((function(e){return Object(h.jsxs)("ul",{className:"calendar__table-column","data-day":e,children:[Object(h.jsx)("li",{className:"calendar__table-column-header",children:e}),Object(h.jsx)(_,{day:e,events:t,onEventDelete:n,sortingBy:a})]},e)}))]})};var w=function(){var e=Object(a.useContext)(b.b),t=e.sessionUser,n=e.setSessionUser;return t?Object(h.jsxs)("div",{className:"calendar__footer",children:[Object(h.jsxs)("div",{children:["You are logged in as ",t.data.name," (",t.data.rights,")"]}),Object(h.jsx)("button",{type:"button",className:"btn btn-outline-secondary",id:"logOutButton",onClick:function(){n(null)},children:"Log out"})]}):Object(h.jsx)("div",{})};n(59);var k=function(e){var t=e.users,n=e.events,c=e.onEventDelete,r=Object(a.useState)("All members"),s=Object(d.a)(r,2),i=s[0],o=s[1];return Object(h.jsxs)("div",{className:"calendar",children:[Object(h.jsx)(v,{users:t,setSortingBy:o}),Object(h.jsx)(N,{events:n,onEventDelete:c,sortingBy:i}),Object(h.jsx)(w,{})]})},C=n(9),E=(n(60),n(66));n(61);var S=function(e){var t=e.message,n=e.status,c=Object(a.useState)(!1),r=Object(d.a)(c,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){i(!0)}),[]),Object(h.jsx)(E.a,{onClose:function(){return i(!1)},show:s,delay:2e3,autohide:!0,children:Object(h.jsx)(E.a.Body,{className:"calendar__toast_".concat(n),children:t})},Object(f.a)())};var A=function(e){var t=e.users,n=e.onEventPost,c=e.setNewNotification,r=Object(O.a)(t).map((function(e){return Object(C.a)(Object(C.a)({},e),{},{isChoosen:!1})})),s=Object(a.useState)({}),o=Object(d.a)(s,2),j=o[0],b=o[1],m=Object(a.useState)(r),f=Object(d.a)(m,2),v=f[0],x=f[1];Object(a.useEffect)((function(){b(Object(C.a)(Object(C.a)({},j),{},{members:v.filter((function(e){return!0===e.isChoosen})).map((function(e){return{id:e.id}}))}))}),[v]),Object(a.useEffect)((function(){b({day:p[0],time:"".concat(g,":00")})}),[]);var _=Object(h.jsxs)("div",{className:"create-event__form-input_multiselect",children:[Object(h.jsxs)("div",{className:"form-check",children:[Object(h.jsx)("input",{className:"form-check-input",type:"checkbox",id:"allMembersCheckbox",value:"All members",onChange:function(e){var t=e.target.checked;return x(t?Object(O.a)(v).map((function(e){return Object(C.a)(Object(C.a)({},e),{},{isChoosen:!0})})):Object(O.a)(v).map((function(e){return Object(C.a)(Object(C.a)({},e),{},{isChoosen:!1})})))}}),Object(h.jsx)("label",{className:"form-check-label",htmlFor:"allMembersCheckbox",children:"All members"})]}),v.map((function(e){return Object(h.jsxs)("div",{className:"form-check",children:[Object(h.jsx)("input",{className:"form-check-input member",type:"checkbox","data-userid":e.id,value:e.id,checked:e.isChoosen,onChange:function(e){x(Object(O.a)(v).map((function(t){var n=e.target.getAttribute("data-userid");return t.id===n?(console.log(t.isChoosen),Object(C.a)(Object(C.a)({},t),{},{isChoosen:!t.isChoosen})):t})))}}),Object(h.jsx)("label",{className:"form-check-label",children:e.data.name})]},e.id)}))]}),y=Object(h.jsx)("div",{className:"create-event__form-input",children:Object(h.jsx)("select",{className:"form-select form-select-lg",onChange:function(e){return b(Object(C.a)(Object(C.a)({},j),{},{day:e.target.value}))},children:p.map((function(e){return Object(h.jsx)("option",{"data-day":e,value:e,children:e},e)}))})}),N=Object(h.jsx)("div",{className:"create-event__form-input",children:Object(h.jsx)("select",{className:"form-select form-select-lg",onChange:function(e){return b(Object(C.a)(Object(C.a)({},j),{},{time:e.target.value}))},children:Object(O.a)(Array(9)).map((function(e,t){var n="".concat(t+g,":00");return Object(h.jsx)("option",{"data-time":n,children:n},n)}))})}),w=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(j.name&&j.members&&j.members.length&&j.day&&j.time)){e.next=8;break}return e.next=4,n(j);case 4:e.sent&&setTimeout((function(){window.location.href="/meeting-planning-calendar-react"}),1e3),e.next=9;break;case 8:c(Object(h.jsx)(S,{message:"Please, fill out all fields",status:"warning"}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"create-event__form",onSubmit:w,children:[Object(h.jsxs)("div",{className:"create-event__form-element",children:[Object(h.jsx)("div",{className:"create-event__form-description",children:"Name of the event"}),Object(h.jsx)("div",{className:"create-event__form-input",children:Object(h.jsx)("input",{placeholder:"Type here",type:"search",className:"form-control","data-name":"name",onChange:function(e){return b(Object(C.a)(Object(C.a)({},j),{},{name:e.target.value}))}})})]}),Object(h.jsxs)("div",{className:"create-event__form-element",children:[Object(h.jsx)("div",{className:"create-event__form-description",children:"Participants"}),_]}),Object(h.jsxs)("div",{className:"create-event__form-element",children:[Object(h.jsx)("div",{className:"create-event__form-description",children:"Day"}),y]}),Object(h.jsxs)("div",{className:"create-event__form-element",children:[Object(h.jsx)("div",{className:"create-event__form-description",children:"Time"}),N]}),Object(h.jsx)("div",{className:"create-event__form-element",children:Object(h.jsx)("button",{type:"submit",className:"btn btn-outline-dark create-event__button_create",children:"Create"})}),Object(h.jsx)("div",{className:"create-event__form-element",children:Object(h.jsx)(i.b,{to:"/meeting-planning-calendar-react",children:Object(h.jsx)("button",{type:"button",className:"btn btn-outline-dark create-event__button_cancel",children:"Cancel"})})})]})})},P=n(65),D=n(68);var I=function(e){var t=e.users,n=e._showModal,c=Object(a.useContext)(b.b),r=c.sessionUser,s=c.setSessionUser,i=Object(a.useState)(t[0].data.name),o=Object(d.a)(i,2),l=o[0],u=o[1],j=Object(a.useState)(n),m=Object(d.a)(j,2),O=m[0],f=m[1],v=function(){return f(!1)};return Object(a.useEffect)((function(){r||(f(!0),u(t[0].data.name))}),[r]),Object(h.jsxs)(P.a,{show:O,onHide:v,backdrop:"static",keyboard:!1,children:[Object(h.jsx)(P.a.Header,{children:Object(h.jsx)(P.a.Title,{children:"Who are You?"})}),Object(h.jsx)(P.a.Body,{children:Object(h.jsx)("div",{className:"calendar__header_handling-dropdown",children:Object(h.jsx)("select",{className:"form-select form-select-lg",id:"membersDropdownModal",onChange:function(e){return u(e.target.value)},children:t.map((function(e){return Object(h.jsxs)("option",{value:e.data.name,"data-rights":e.data.rights,children:[e.data.name," (",e.data.rights,")"]},e.id)}))})})}),Object(h.jsx)(P.a.Footer,{children:Object(h.jsx)(D.a,{variant:"secondary",onClick:function(){v(),s((function(){return t.find((function(e){return e.data.name===l}))}))},children:"Submit"})})]})};var B=function(e){var t=e.users,n=e.events,r=e.onEventDelete,s=e.onEventPost,i=e.newNotification,o=Object(a.useState)([]),l=Object(d.a)(o,2),u=l[0],b=l[1],m=function(e){return b([].concat(Object(O.a)(u.slice(u.length-5)),[e]))};return Object(a.useEffect)((function(){m(i)}),[i]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(j.b,{path:"/meeting-planning-calendar-react",exact:!0,children:[Object(h.jsx)(I,{users:t}),Object(h.jsx)(k,{users:t,events:n,onEventDelete:r})]}),Object(h.jsx)(j.b,{path:"/meeting-planning-calendar-react/create-event",children:Object(h.jsx)(A,{users:t,onEventPost:s,setNewNotification:m})}),Object(h.jsx)("div",{"aria-live":"polite","aria-atomic":"true",className:"position-relative",children:Object(h.jsx)("div",{className:"toast-container position-fixed bottom-0 end-0 p-3",children:u.map((function(e){return Object(h.jsx)(c.a.Fragment,{children:e},Object(f.a)())}))})})]})};var T=function(){return Object(h.jsxs)("div",{className:"error-404",children:[Object(h.jsx)("h1",{className:"page-title",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(h.jsx)("p",{children:"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"})]})};var U=function(){var e=Object(a.useContext)(b.b).defaultSessionUser,t=Object(a.useState)(null),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),i=Object(d.a)(s,2),o=i[0],O=i[1],f=Object(a.useState)(null),v=Object(d.a)(f,2),x=v[0],p=v[1],g=Object(a.useState)(),_=Object(d.a)(g,2),y=_[0],N=_[1],w=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://158.101.166.74:8080/api/data/yevhenii_zhyrov/events/".concat(t),{method:"DELETE"});case 3:if(!e.sent.ok){e.next=9;break}return n=o.filter((function(e){return e.id!==t})),O(n),N(Object(h.jsx)(S,{message:"API: event deleted successfully",status:"successful"})),e.abrupt("return");case 9:N(Object(h.jsx)(S,{message:"API: something went wrong",status:"warning"})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.some((function(e){var n=e.data;return n.day===t.day&&n.time===t.time}))){e.next=3;break}return N(Object(h.jsx)(S,{message:"API: This time slot is already occupied. Please choose another day or time",status:"warning"})),e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,fetch("http://158.101.166.74:8080/api/data/yevhenii_zhyrov/events",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({data:JSON.stringify(t)})});case 6:if(!e.sent.ok){e.next=10;break}return N(Object(h.jsx)(S,{message:"API: event posted successfully",status:"successful"})),e.abrupt("return",!0);case 10:return N(Object(h.jsx)(S,{message:"API: something went wrong",status:"warning"})),e.abrupt("return",!1);case 14:return e.prev=14,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),C=Object(a.useCallback)(Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://158.101.166.74:8080/api/data/yevhenii_zhyrov/events");case 3:return t=e.sent,e.next=6,t.json();case 6:if(null!==(n=e.sent)){e.next=11;break}return O([]),N(Object(h.jsx)(S,{message:"API: events downloaded successfully, but... no data yet",status:"successful"})),e.abrupt("return");case 11:if(!t.ok){e.next=16;break}return a=n.map((function(e){return{id:e.id,data:JSON.parse(e.data)}})),O(a),N(Object(h.jsx)(S,{message:"API: events downloaded successfully",status:"successful"})),e.abrupt("return");case 16:N(Object(h.jsx)(S,{message:"API: something went wrong",status:"warning"})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])}))),[]),E=Object(a.useCallback)(Object(u.a)(l.a.mark((function t(){var n,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://158.101.166.74:8080/api/data/yevhenii_zhyrov/users");case 3:return n=t.sent,t.next=6,n.json();case 6:if(null!==(a=t.sent)){t.next=12;break}return null===x&&p(e),r(m.a),N(Object(h.jsx)(S,{message:"API: users downloaded successfully, but... no data yet",status:"successful"})),t.abrupt("return");case 12:if(!n.ok){t.next=17;break}return c=a.map((function(e){return{id:e.id,data:JSON.parse(e.data)}})),r(c),N(Object(h.jsx)(S,{message:"API: users downloaded successfully",status:"successful"})),t.abrupt("return");case 17:N(Object(h.jsx)(S,{message:"API: something went wrong",status:"warning"})),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),console.error(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,20]])}))),[]);return Object(a.useEffect)((function(){C(),E()}),[E,C]),null===c?Object(h.jsx)("div",{}):Object(h.jsx)(b.a,{value:{sessionUser:x,setSessionUser:p},children:Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.a,{exact:!0,from:"/",to:"/meeting-planning-calendar-react"}),Object(h.jsx)(j.b,{path:"/meeting-planning-calendar-react",children:Object(h.jsx)(B,{users:c,events:o,onEventDelete:w,onEventPost:k,newNotification:y})}),Object(h.jsx)(j.b,{path:"/error",component:T})]})})};s.a.render(Object(h.jsx)(i.a,{children:Object(h.jsx)(U,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.2964d627.chunk.js.map