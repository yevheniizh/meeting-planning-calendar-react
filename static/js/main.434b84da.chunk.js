(this["webpackJsonpmeeting-planning-calendar-react"]=this["webpackJsonpmeeting-planning-calendar-react"]||[]).push([[0],{27:function(e,t,n){"use strict";(function(e){n(0);var a=n(1);t.a=function(t){var n=t.event,c=t.onEventDelete;return Object(a.jsxs)("div",{draggable:"true","data-meeting":n.id,"data-meeting-day":n.data.day,"data-meeting-time":n.data.time,style:{visibility:"visible"},children:[Object(a.jsx)("div",{className:"calendar__table-column_meeting",children:n.data.name}),Object(a.jsx)("button",{type:"button",className:"calendar__table-column_meeting_delete","data-delete":"delete",onClick:function(){e.confirm("Are you sure you want to delete '".concat(n.data.name,"' event?"))&&c(n.id)},children:"\xd7"})]})}}).call(this,n(26))},34:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(15),s=n.n(r),i=n(17),o=(n(34),n(35),n(9)),l=n.n(o),d=n(18),u=n(11),j=n(5),b=[{id:"0000",data:{name:"guest",rights:"user"}}],m=Object(u.a)(b,1)[0],h=Object(a.createContext)({defaultSessionUser:m}),v=h.Provider,f=(h.Consumer,n(1));var O=function(e){var t=e.users;return Object(f.jsxs)("div",{className:"calendar__header",children:[Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Calendar"})}),Object(f.jsxs)("div",{className:"calendar__header_handling",children:[Object(f.jsx)("div",{className:"calendar__header_handling-dropdown",children:Object(f.jsxs)("select",{className:"form-select form-select-lg",id:"membersDropdown",children:[Object(f.jsx)("option",{value:"All members",children:"All members"}),t.map((function(e){return Object(f.jsxs)("option",{value:e.data.name,"data-rights":e.data.rights,children:[e.data.name," (",e.data.rights,")"]},e.id)}))]})}),Object(f.jsx)("div",{className:"calendar__header_handling-newEventCreatingButton",children:Object(f.jsx)(i.b,{to:"/create-event",children:Object(f.jsx)("button",{type:"submit",name:"newEvent",className:"btn btn-outline-dark",children:"New event +"})})})]})]})},x=n(16),p=n(27),g=["Mon","Tue","Wed","Thu","Fri"],_=10;var y=function(e){var t=e.day,n=e.events,a=e.onEventDelete;if(n){var c=Object(x.a)(n).filter((function(e){return e.data.day===t}));return Object(f.jsx)(f.Fragment,{children:Object(x.a)(Array(9)).map((function(e,n){var r="".concat(n+_,":00");return c.some((function(e){return e.data.time===r}))?Object(f.jsx)("li",{"data-time":r,"data-day":t,children:Object(f.jsx)(p.a,{event:c.find((function(e){return e.data.time===r})),onEventDelete:a})},"".concat(t," ").concat(r)):Object(f.jsx)("li",{"data-time":r,"data-day":t},"".concat(t," ").concat(r))}))})}return Object(f.jsx)(f.Fragment,{children:Object(x.a)(Array(9)).map((function(e,n){var a="".concat(n+_,":00");return Object(f.jsx)("li",{"data-time":"".concat(a),"data-day":t},"".concat(t," ").concat(a))}))})};var N=function(){return Object(f.jsx)(f.Fragment,{children:Object(x.a)(Array(9)).map((function(e,t){var n="".concat(t+_,":00");return Object(f.jsx)("li",{children:n},n)}))})};var k=function(e){var t=e.events,n=e.onEventDelete;return Object(f.jsxs)("div",{className:"calendar__table",children:[Object(f.jsxs)("ul",{className:"calendar__table-column","data-day":"Name",children:[Object(f.jsx)("li",{className:"calendar__table-column-header",children:"Name"}),Object(f.jsx)(N,{})]}),g.map((function(e){return Object(f.jsxs)("ul",{className:"calendar__table-column","data-day":e,children:[Object(f.jsx)("li",{className:"calendar__table-column-header",children:e}),Object(f.jsx)(y,{day:e,events:t,onEventDelete:n})]},e)}))]})};var w=function(){var e=Object(a.useContext)(h).setSessionUser,t=JSON.parse(sessionStorage.getItem("memberLoggedIn"));return t?Object(f.jsxs)("div",{className:"calendar__footer",children:[Object(f.jsxs)("div",{children:["You are logged in as ",t.data.name," (",t.data.rights,")"]}),Object(f.jsx)("button",{type:"button",className:"btn btn-outline-secondary",id:"logOutButton",onClick:function(){sessionStorage.clear(),e(null)},children:"Log out"})]}):Object(f.jsx)("div",{})};n(45);var S=function(e){var t=e.users,n=e.events,a=e.onEventDelete;return Object(f.jsxs)("div",{className:"calendar",children:[Object(f.jsx)(O,{users:t}),Object(f.jsx)(k,{events:n,onEventDelete:a}),Object(f.jsx)(w,{}),Object(f.jsx)("div",{"aria-live":"polite","aria-atomic":"true",className:"position-relative",children:Object(f.jsx)("div",{className:"toast-container position-fixed bottom-0 end-0 p-3"})})]})},P=n(51),C=n(52);var A=function(e){var t=e.users,n=e._showModal,c=Object(a.useContext)(h),r=c.sessionUser,s=c.setSessionUser,i=Object(a.useState)(t[0].data.name),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(a.useState)(n),b=Object(u.a)(j,2),m=b[0],v=b[1],O=function(){return v(!1)};return Object(a.useEffect)((function(){r||v(!0)}),[r]),Object(f.jsxs)(P.a,{show:m,onHide:O,backdrop:"static",keyboard:!1,children:[Object(f.jsx)(P.a.Header,{children:Object(f.jsx)(P.a.Title,{children:"Who are You?"})}),Object(f.jsx)(P.a.Body,{children:Object(f.jsx)("div",{className:"calendar__header_handling-dropdown",children:Object(f.jsx)("select",{className:"form-select form-select-lg",id:"membersDropdownModal",onChange:function(e){return d(e.target.value)},children:t.map((function(e){return Object(f.jsxs)("option",{value:e.data.name,"data-rights":e.data.rights,children:[e.data.name," (",e.data.rights,")"]},e.id)}))})})}),Object(f.jsx)(P.a.Footer,{children:Object(f.jsx)(C.a,{variant:"secondary",onClick:function(){O(),s((function(){var e=t.find((function(e){return e.data.name===l}));return sessionStorage.setItem("memberLoggedIn",JSON.stringify(e)),e}))},children:"Submit"})})]})},I=n(14);n(47);var E=function(e){var t=e.users,n=e.onEventPost,c=Object(a.useState)({}),r=Object(u.a)(c,2),s=r[0],o=r[1];Object(a.useEffect)((function(){o({day:g[0],time:"".concat(_,":00")})}),[]);var j=Object(f.jsxs)("div",{className:"create-event__form-input_multiselect",children:[Object(f.jsxs)("div",{className:"form-check",children:[Object(f.jsx)("input",{className:"form-check-input",type:"checkbox",id:"allMembersCheckbox",value:"All members",onChange:function(e){return o(Object(I.a)(Object(I.a)({},s),{},{members:e.target.value}))}}),Object(f.jsx)("label",{className:"form-check-label",htmlFor:"allMembersCheckbox",children:"All members"})]}),t.map((function(e){return Object(f.jsxs)("div",{className:"form-check",children:[Object(f.jsx)("input",{className:"form-check-input member",type:"checkbox","data-member":e.id,value:e.id,onChange:function(e){return o({members:e.target.value})}}),Object(f.jsx)("label",{className:"form-check-label",children:e.data.name})]},e.id)}))]}),b=Object(f.jsx)("div",{className:"create-event__form-input",children:Object(f.jsx)("select",{className:"form-select form-select-lg",onChange:function(e){return o(Object(I.a)(Object(I.a)({},s),{},{day:e.target.value}))},children:g.map((function(e){return Object(f.jsx)("option",{"data-day":e,value:e,children:e},e)}))})}),m=Object(f.jsx)("div",{className:"create-event__form-input",children:Object(f.jsx)("select",{className:"form-select form-select-lg",onChange:function(e){return o(Object(I.a)(Object(I.a)({},s),{},{time:e.target.value}))},children:Object(x.a)(Array(9)).map((function(e,t){var n="".concat(t+_,":00");return Object(f.jsx)("option",{"data-time":n,children:n},n)}))})}),h=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(s.name&&s.members&&s.day&&s.time)){e.next=8;break}return e.next=4,n(s);case 4:e.sent&&setTimeout((function(){window.location.href="/meeting-planning-calendar-react"}),1e3),e.next=9;break;case 8:console.log("Please, fill out all fields");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{children:Object(f.jsxs)("form",{className:"create-event__form",onSubmit:h,children:[Object(f.jsxs)("div",{className:"create-event__form-element",children:[Object(f.jsx)("div",{className:"create-event__form-description",children:"Name of the event"}),Object(f.jsx)("div",{className:"create-event__form-input",children:Object(f.jsx)("input",{placeholder:"Type here",type:"search",className:"form-control","data-name":"name",onChange:function(e){return o(Object(I.a)(Object(I.a)({},s),{},{name:e.target.value}))}})})]}),Object(f.jsxs)("div",{className:"create-event__form-element",children:[Object(f.jsx)("div",{className:"create-event__form-description",children:"Participants"}),j]}),Object(f.jsxs)("div",{className:"create-event__form-element",children:[Object(f.jsx)("div",{className:"create-event__form-description",children:"Day"}),b]}),Object(f.jsxs)("div",{className:"create-event__form-element",children:[Object(f.jsx)("div",{className:"create-event__form-description",children:"Time"}),m]}),Object(f.jsx)("div",{className:"create-event__form-element",children:Object(f.jsx)("button",{type:"submit",className:"btn btn-outline-dark create-event__button_create",children:"Create"})}),Object(f.jsx)("div",{className:"create-event__form-element",children:Object(f.jsx)(i.b,{to:"/meeting-planning-calendar-react",children:Object(f.jsx)("button",{type:"button",className:"btn btn-outline-dark create-event__button_cancel",children:"Cancel"})})})]})})};var D=function(){var e=JSON.parse(sessionStorage.getItem("memberLoggedIn")),t=Object(a.useContext)(h).defaultSessionUser,n=Object(a.useState)(null),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(null),o=Object(u.a)(i,2),m=o[0],O=o[1],x=Object(a.useState)(e),p=Object(u.a)(x,2),g=p[0],_=p[1],y=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://158.101.166.74:8080/api/data/yevhenii_zhyrov/events/".concat(t),{method:"DELETE"});case 3:if(!e.sent.ok){e.next=9;break}return n=m.filter((function(e){return e.id!==t})),O(n),console.log("API: event deleted succesfully"),e.abrupt("return");case 9:console.log("API: something went wrong"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("".concat(e.t0,". Please try again"));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.some((function(e){var n=e.data;return n.day===t.day&&n.time===t.time}))){e.next=3;break}return console.log("API: This time slot is already occupied. Please choose another day or time"),e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,fetch("http://158.101.166.74:8080/api/data/yevhenii_zhyrov/events",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({data:JSON.stringify(t)})});case 6:if(n=e.sent,!(a=n.ok)){e.next=11;break}return console.log("API: event posted succesfully"),e.abrupt("return",a);case 11:return console.log("API: something went wrong"),e.abrupt("return",a);case 15:return e.prev=15,e.t0=e.catch(3),console.log("".concat(e.t0,". Please try again")),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),k=Object(a.useCallback)(Object(d.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://158.101.166.74:8080/api/data/yevhenii_zhyrov/events");case 3:return t=e.sent,e.next=6,t.json();case 6:if(null!==(n=e.sent)){e.next=12;break}return O([]),console.log("API: events downloaded succesfully"),console.log("API: no data"),e.abrupt("return");case 12:if(!t.ok){e.next=17;break}return a=n.map((function(e){return{id:e.id,data:JSON.parse(e.data)}})),O(a),console.log("API: events downloaded succesfully"),e.abrupt("return");case 17:console.log("API: something went wrong"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log("".concat(e.t0,". Please try again"));case 23:case"end":return e.stop()}}),e,null,[[0,20]])}))),[]),w=Object(a.useCallback)(Object(d.a)(l.a.mark((function e(){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://158.101.166.74:8080/api/data/yevhenii_zhyrov/users");case 3:return n=e.sent,e.next=6,n.json();case 6:if(null!==(a=e.sent)){e.next=13;break}return null===g&&_(t),s(b),console.log("API: users downloaded succesfully"),console.log("API: no users"),e.abrupt("return");case 13:if(!n.ok){e.next=18;break}return c=a.map((function(e){return{id:e.id,data:JSON.parse(e.data)}})),s(c),console.log("API: users downloaded succesfully"),e.abrupt("return");case 18:console.log("API: something went wrong"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.log("".concat(e.t0,". Please try again"));case 24:case"end":return e.stop()}}),e,null,[[0,21]])}))),[]);return Object(a.useEffect)((function(){k(),w()}),[w,k]),null===r?Object(f.jsx)("div",{}):Object(f.jsx)(v,{value:{sessionUser:g,setSessionUser:_},children:Object(f.jsxs)(j.d,{children:[Object(f.jsxs)(j.b,{path:"/meeting-planning-calendar-react",exact:!0,children:[Object(f.jsx)(A,{users:r}),Object(f.jsx)(S,{users:r,events:m,onEventDelete:y})]}),Object(f.jsx)(j.b,{path:"/create-event",children:Object(f.jsx)(E,{users:r,onEventPost:N})}),Object(f.jsx)(j.b,{path:"/",component:function(){return Object(f.jsx)(j.a,{to:"/meeting-planning-calendar-react"})}})]})})};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(i.a,{children:Object(f.jsx)(D,{})})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.434b84da.chunk.js.map